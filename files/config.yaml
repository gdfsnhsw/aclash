# ç³»ç»Ÿå‚æ•°
mixed-port: 7891            #é›†æˆç«¯å£ï¼Œhttpä¸socks
redir-port: 7892            #é€æ˜ä»£ç†ç«¯å£ï¼Œä¸èƒ½æ›´æ”¹
tproxy-port: 7893           #tproxyç«¯å£
authentication:
  - "user:pass"             #httpä¸socksçš„è´¦å·è·Ÿå¯†ç ï¼Œæ¨èä½¿ç”¨
allow-lan: true
bind-address: '*'
mode: Script
log-level: info
ipv6: false
external-controller: 0.0.0.0:9090
external-ui: dashboard
secret: ""                  #dashboardé¢æ¿çš„å¯†ç ï¼ŒåŒæ—¶ä¹Ÿæ˜¯tracingçš„å¯†ç 
interface-name: ens18
routing-mark: 6666
profile:
  store-selected: true      #ç­–ç•¥ç»„é€‰æ‹©ç¼“å­˜å¼€å…³ï¼Œæ‰“å¼€åå¯ä»¥ä¿å­˜ç­–ç•¥ç»„é€‰æ‹©ï¼Œé‡å¯ä¸ä¼šå›å¤é»˜è®¤
  tracing: true             #tracingå¼€å…³ï¼Œå¿…é¡»æ‰“å¼€æ‰èƒ½å¯¹æ¥tracing
  store-fake-ip: true       #æŒä¹…åŒ–fake-ip

hosts:
  # Firebase Cloud Messaging
  'mtalk.google.com': 108.177.125.188
  # Google Dl
  'dl.google.com': 180.163.151.161
  'dl.l.google.com': 180.163.151.161

# TUNè®¾ç½®
tun:
  enable: true         
  stack: system
  dns-hijack:
    - 22.0.0.2:53
#    - tcp://8.8.8.8:53
#    - tcp://8.8.4.4:53
#    - 8.8.8.8:53
#    - 8.8.4.4:53

# DNSè®¾ç½®  
dns:
  enable: true
  ipv6: false
  listen: 127.0.0.1:5352
  default-nameserver:
    - 223.5.5.5
    - 8.8.8.8
  enhanced-mode: fake-ip
  fake-ip-range: 22.0.0.0/8
  use-hosts: true
  fake-ip-filter:
    # === LAN ===
    - '*.example'
    - '*.home.arpa'
    - '*.invalid'
    - '*.lan'
    - '*.local'
    - '*.localdomain'
    - '*.localhost'
    - '*.test'
    # === Apple Software Update Service ===
    - 'mesu.apple.com'
    - 'swscan.apple.com'
    # === ASUS Router ===
    - '*.router.asus.com'
    # === Google ===
    - 'lens.l.google.com'
    - 'stun.l.google.com'
    ## Golang
    - 'proxy.golang.org'
    # === Linksys Wireless Router ===
    - '*.linksys.com'
    - '*.linksyssmartwifi.com'
    # === Windows 10 Connnect Detection ===
    - '*.ipv6.microsoft.com'
    - '*.msftconnecttest.com'
    - '*.msftncsi.com'
    - 'msftconnecttest.com'
    - 'msftncsi.com'
    # === NTP Service ===
    - 'ntp.*.com'
    - 'ntp1.*.com'
    - 'ntp2.*.com'
    - 'ntp3.*.com'
    - 'ntp4.*.com'
    - 'ntp5.*.com'
    - 'ntp6.*.com'
    - 'ntp7.*.com'
    - 'time.*.apple.com'
    - 'time.*.com'
    - 'time.*.gov'
    - 'time1.*.com'
    - 'time2.*.com'
    - 'time3.*.com'
    - 'time4.*.com'
    - 'time5.*.com'
    - 'time6.*.com'
    - 'time7.*.com'
    - 'time.*.edu.cn'
    - '*.time.edu.cn'
    - '*.ntp.org.cn'
    - '+.pool.ntp.org'
    - 'time1.cloud.tencent.com'
    # === Game Service ===
    ## Microsoft Xbox
    - 'speedtest.cros.wr.pvp.net'
    - '*.*.xboxlive.com'
    - 'xbox.*.*.microsoft.com'
    - 'xbox.*.microsoft.com'
    - 'xnotify.xboxlive.com'
    ## Nintendo Switch
    - '*.*.*.srv.nintendo.net'
    - '+.srv.nintendo.net'
    ## Sony PlayStation
    - '*.*.stun.playstation.net'
    - '+.stun.playstation.net'
    ## STUN Server
    - '+.stun.*.*.*.*'
    - '+.stun.*.*.*'
    - '+.stun.*.*'
    - 'stun.*.*.*'
    - 'stun.*.*'
    # === Music Service ===
    ## å’ªå’•éŸ³ä¹
    - '*.music.migu.cn'
    - 'music.migu.cn'
    ## å¤ªå’ŒéŸ³ä¹
    - 'music.taihe.com'
    - 'musicapi.taihe.com'
    ## è…¾è®¯éŸ³ä¹
    - 'songsearch.kugou.com'
    - 'trackercdn.kugou.com'
    - '*.kuwo.cn'
    - 'api-jooxtt.sanook.com'
    - 'api.joox.com'
    - 'joox.com'
    - 'y.qq.com'
    - '*.y.qq.com'
    - 'amobile.music.tc.qq.com'
    - 'aqqmusic.tc.qq.com'
    - 'mobileoc.music.tc.qq.com'
    - 'streamoc.music.tc.qq.com'
    - 'dl.stream.qqmusic.qq.com'
    - 'isure.stream.qqmusic.qq.com'
    ## ç½‘æ˜“äº‘éŸ³ä¹
    - 'music.163.com'
    - '*.music.163.com'
    - '*.126.net'
    ## è™¾ç±³éŸ³ä¹
    - '*.xiami.com'
    # === Other ===
    ## QQ Quick Login
    - 'localhost.ptlogin2.qq.com'
    - 'localhost.sec.qq.com'
    ## BiliBili P2P
    - '*.mcdn.bilivideo.cn'
  nameserver:
    - 223.5.5.5

# ä»£ç†è®¾ç½®

# ä»£ç†é›†è®¾ç½®    
proxy-providers:
  AllProxy:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true" 
    interval: 3600
    path: ./Proxy/AllProxy.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  HK-Other:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^((?!IEPL|IPLC).)*é¦™æ¸¯((?!IEPL|IPLC).)*$"
    interval: 3600
    path: ./Proxy/HK-Other.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  HK-IEPL:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^(?=.*é¦™æ¸¯)(?=.*IEPL).*$" 
    interval: 3600
    path: ./Proxy/HK-IEPL.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  HK-IPLC:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^(?=.*é¦™æ¸¯)(?=.*IPLC).*$" 
    interval: 3600
    path: ./Proxy/HK-IPLC.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204


  JP-IEPL:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^(?=.*æ—¥æœ¬)(?=.*IEPL).*$" 
    interval: 3600
    path: ./Proxy/JP-IEPL.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  JP-Other:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^((?!IEPL|IPV6).)*æ—¥æœ¬((?!IEPL|IPV6).)*$" 
    interval: 3600
    path: ./Proxy/JP-Other.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  TW-IEPL:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^(?=.*å°æ¹¾)(?=.*IEPL).*$" 
    interval: 3600
    path: ./Proxy/TW-IEPL.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  TW-IPLC:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^(?=.*å°æ¹¾)(?=.*IPLC).*$" 
    interval: 3600
    path: ./Proxy/TW-IPLC.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  SG-IEPL:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^(?=.*æ–°åŠ å¡)(?=.*IEPL).*$" 
    interval: 3600
    path: ./Proxy/SG-IEPL.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  UA-IEPL:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^(?=.*ç¾å›½)(?=.*IEPL).*$" 
    interval: 3600
    path: ./Proxy/UA-IEPL.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  KR-Other:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^((?!IEPL|IPLC).)*éŸ©å›½((?!IEPL|IPLC).)*$" 
    interval: 3600
    path: ./Proxy/KR-Other.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  KR-IEPL:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^(?=.*éŸ©å›½)(?=.*IEPL).*$" 
    interval: 3600
    path: ./Proxy/KR-IEPL.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  KR-IPLC:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=^(?=.*éŸ©å›½)(?=.*IPLC).*$" 
    interval: 3600
    path: ./Proxy/KR-IPLC.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

  GAME:
    type: http
    url: "http://127.0.0.1:25500/getprofile?name=profiles/formyairport.ini&token=password&list=true&include=æ¸¸æˆ" 
    interval: 3600
    path: ./Proxy/GAME.yaml
    health-check:
      enable: true
      interval: 600
      url: http://cp.cloudflare.com/generate_204

proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - ğŸ”° å…¨éƒ¨èŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸ® æ¸¸æˆèŠ‚ç‚¹
      - â­• ç›´è¿
  - name: ğŸ“ˆ Speedtest
    type: select
    proxies:
      - â­• ç›´è¿
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸ’¬ å³æ—¶é€šè®¯
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - â­• ç›´è¿
  - name: ğŸŒ å›½é™…äº’è”
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â­• ç›´è¿
  - name: ğŸ¬ Netflix
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸ”° å…¨éƒ¨èŠ‚ç‚¹
      - â­• ç›´è¿
  - name: ğŸ“½ Youtube
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - â­• ç›´è¿
  - name: ğŸ¥ æ¸¯æ¾³å°åª’ä½“
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â­• ç›´è¿
  - name: ğŸ¥ å›½é™…åª’ä½“
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â­• ç›´è¿
  - name: ğŸ¥ å›½å†…åª’ä½“
    type: select
    proxies:
      - â­• ç›´è¿
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸŒ å›½é™…äº’è”
  - name: ğŸ’°æ•°å­—æ”¯ä»˜
    type: select
    proxies:
      - â­• ç›´è¿
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ”° å…¨éƒ¨èŠ‚ç‚¹ 
  - name: ğŸ”„ è°·æ­ŒæœåŠ¡
    type: select
    proxies:
      - ğŸŒ å›½é™…äº’è”
      - â­• ç›´è¿
  - name: ğŸ–¥ å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - ğŸŒ å›½é™…äº’è”
      - â­• ç›´è¿
  - name: ğŸ“± è‹¹æœæœåŠ¡
    type: select
    proxies:
      - â­• ç›´è¿
      - ğŸŒ å›½é™…äº’è”
  - name: ğŸ® æ¸¸æˆå¹³å°
    type: select
    proxies:
      - â­• ç›´è¿    
      - ğŸ® æ¸¸æˆèŠ‚ç‚¹
  - name: â¬›ï¸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â­• ç›´è¿
      - ğŸŒ å›½é™…äº’è”

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° HK-IEPL
      - ğŸ‡­ğŸ‡° HK-IPLC
      - ğŸ‡­ğŸ‡° HK-Other

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: select
    proxies:
      - ğŸ‡¨ğŸ‡³ TW-IEPL
      - ğŸ‡¨ğŸ‡³ TW-IPLC

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: select
    proxies:
      - ğŸ‡¯ğŸ‡µ JP-IEPL
      - ğŸ‡¯ğŸ‡µ JP-Other

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    type: select
    proxies:
      - ğŸ‡¸ğŸ‡¬ SG-IEPL

  - name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
    type: select
    proxies:
      - ğŸ‡ºğŸ‡² UA-IEPL

  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    type: select
    proxies:
      - ğŸ‡°ğŸ‡· KR-IEPL
      - ğŸ‡°ğŸ‡· KR-IPLC
      - ğŸ‡°ğŸ‡· KR-Other

  - name: ğŸ”° å…¨éƒ¨èŠ‚ç‚¹
    type: select
    use:
      - AllProxy      

  - name: ğŸ® æ¸¸æˆèŠ‚ç‚¹
    type: select
    use:
      - GAME
      
  - name: ğŸ‡­ğŸ‡° HK-IEPL
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - HK-IEPL

  - name: ğŸ‡­ğŸ‡° HK-IPLC
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - HK-IPLC

  - name: ğŸ‡­ğŸ‡° HK-Other
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - HK-Other

  - name: ğŸ‡¨ğŸ‡³ TW-IEPL
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - TW-IEPL

  - name: ğŸ‡¨ğŸ‡³ TW-IPLC
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - TW-IPLC

  - name: ğŸ‡¯ğŸ‡µ JP-IEPL
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - JP-IEPL

  - name: ğŸ‡¯ğŸ‡µ JP-Other
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - JP-Other

  - name: ğŸ‡¸ğŸ‡¬ SG-IEPL
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - SG-IEPL

  - name: ğŸ‡ºğŸ‡² UA-IEPL 
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - UA-IEPL  

  - name: ğŸ‡°ğŸ‡· KR-IEPL
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - KR-IEPL

  - name: ğŸ‡°ğŸ‡· KR-IPLC
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - KR-IPLC

  - name: ğŸ‡°ğŸ‡· KR-Other
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 10800
    tolerance: 300
    use:
      - KR-Other

  - name: â›”ï¸ å»å¹¿å‘Š
    type: select
    proxies:
      - ğŸš« æ‹¦æˆª
      - â­• ç›´è¿

  - name: ğŸš« æ‹¦æˆª
    type: select
    proxies:
      - REJECT

  - name: â­• ç›´è¿
    type: select
    proxies:
      - DIRECT


#è§„åˆ™é›†
rule-providers:
## > å»å¹¿å‘Š
  AdBlock1:                                    #è§„åˆ™é›†æ–‡ä»¶å
    type: http                                 #è§„åˆ™é›†æ–‡ä»¶ç±»å‹ï¼ˆHTTP=åœ¨çº¿ä¸‹è½½ï¼›File=æœ¬åœ°å¯¼å…¥ï¼‰
    behavior: classical                        #è¡Œä¸ºåŸŸ
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock1.list     #è§„åˆ™é›†åœ¨çº¿ä¸‹è½½ä¿å­˜åœ°å€æˆ–æœ¬åœ°æ–‡ä»¶å¯¼å…¥åœ°å€
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%e7%bd%91%e7%bb%9c%e6%9c%8d%e5%8a%a1/Digital.list  #è§„åˆ™é›†æ–‡ä»¶ä¸‹è½½åœ°å€
    interval: 43200                           #è§„åˆ™é›†æ–‡ä»¶è‡ªåŠ¨æ›´æ–°é—´éš”
  AdBlock2:
    type: http
    behavior: classical
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock2.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA/AdBlock2.list
    interval: 43200
  AdBlock3:
    type: http
    behavior: classical
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock3.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA/AdBlock3.list
    interval: 43200
  AdBlock4:
    type: http
    behavior: classical
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock4.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA/AdBlock4.list
    interval: 43200
  AdBlock5:
    type: http
    behavior: classical
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock5.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA/AdBlock5.list
    interval: 43200
## > åª’ä½“æœåŠ¡
  # > æ²¹ç®¡
  YouTube:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/YouTube.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/YouTube.list
    interval: 43200
  # > å¥ˆé£
  Netflix:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/Netflix.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/Netflix.list
    interval: 43200
  # > è¿ªå£«å°¼+
  Disney:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/Disney.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/Disney.list
    interval: 43200
  # > HBO
  HBO:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/HBO.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/HBO.list
    interval: 43200
  # > æ¸¯æ¾³å°åª’ä½“
  HMTmedia:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/HMTmedia.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/HMTmedia.list
    interval: 43200
  # > æ²¹ç®¡éŸ³ä¹   
  YoutubeMusic:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/YoutubeMusic.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/YoutubeMusic.list
    interval: 43200
  # > Apple TV
  AppleTV:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/AppleTV.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/AppleTV.list
    interval: 43200
  # > å…¶ä½™å›½é™…æµåª’ä½“
  GlobalMedia:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/GlobalMedia.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/GlobalMedia.list
    interval: 43200
  # > å›½å†…æµåª’ä½“
  Chinesemedia:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/Chinesemedia.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/Chinesemedia.list
    interval: 43200
  # ç½‘æ˜“äº‘
  wyy:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/wyy.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/wyy.list
    interval: 43200    
## > ç½‘ç»œæœåŠ¡
  # > è‹¹æœæœåŠ¡
  # è‹¹æœAPI
  AppleAPI:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/AppleAPI.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/AppleAPI.list
    interval: 43200
  # è‹¹æœCDN
  AppleCDN:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/AppleCDN.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/AppleCDN.list
    interval: 43200
  # è°·æ­ŒæœåŠ¡
  Google:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Google.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Google.list
    interval: 43200
  # > è°·æ­ŒCDN
  GoogleCDN:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/GoogleCDN.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/GoogleCDN.list
    interval: 43200
  # å¾®è½¯æœåŠ¡
  Microsoft:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Microsoft.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Microsoft.list
    interval: 43200
  # > å¾®è½¯CDN
  MicrosoftCDN:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/MicrosoftCDN.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/MicrosoftCDN.list
    interval: 43200
  # æ•°å­—è´§å¸
  Digital:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Digital.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Digital.list
    interval: 43200    
  # Paypal
  Paypal:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Paypal.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Paypal.list
    interval: 43200
  # Speedtest
  Speedtest:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Speedtest.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Speedtest.list
    interval: 43200
  # å³æ—¶é€šè®¯ï¼ˆTG,KAKAO,LINE....)
  Telegram:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Telegram.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Telegram.list
    interval: 43200
  # æ¸¸æˆå¹³å°ï¼ˆSteam,xbox,PS,æˆ˜ç½‘ï¼‰
  gameline:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/gameline.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/gameline.list
    interval: 43200
  # > å›å›½çº¿è·¯ 
  Domestic:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Domestic.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Domestic.list
    interval: 43200
  Lan:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Lan.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Lan.list
    interval: 43200
  # > å›½é™…äº’è”
  Proxy:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Proxy.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Proxy.list
    interval: 43200
## > é»‘ç™½åå•
  # > é»‘åå•
  Black:
    type: http
    behavior: classical
    path: ./ruleset/é»‘ç™½åå•/Black.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95/Black.list
    interval: 43200
  # > ç™½åå•
  White:
    type: http
    behavior: classical
    path: ./ruleset/é»‘ç™½åå•/White.list
    url: http://077582580.xyz:3000/clash1step/rule-provider/raw/branch/master/%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95/White.list
    interval: 43200

# ScriptåŒ¹é…æ¨¡å¼
script:
  code: |
    def main(ctx, metadata):

        ## >> è‡ªå®šä¹‰å˜é‡

        # quicç­–ç•¥
        quic = int(metadata["dst_port"])
        if metadata["network"] == "UDP":
            if quic == 443:
                if "180.163.200." in metadata["dst_ip"]:
                    return "â­• ç›´è¿"
                ctx.log('[Script] matched QUIC traffic use reject')
                return "REJECT"

        # æ¸¸æˆä¸»æœºç­–ç•¥               
        #SrcIP = ctx.resolve_ip(metadata["src_ip"])
        #if SrcIP == "10.10.10.14":
        #    if metadata["network"] == "udp":
        #        ctx.log('[Script] matched SrcIP')
        #        return "ğŸ® æ¸¸æˆåŠ é€Ÿ"
        #    return "ğŸŒ å›½é™…äº’è”"
          
        # å¹¿å‘Šæ‹¦æˆªç­–ç•¥
        ad_action = {
            "Speedtest": "ğŸ“ˆ Speedtest",
            "AdBlock1": "â›”ï¸ å»å¹¿å‘Š",
            "AdBlock2": "â›”ï¸ å»å¹¿å‘Š",
            "AdBlock3": "â›”ï¸ å»å¹¿å‘Š",
            "AdBlock4": "â›”ï¸ å»å¹¿å‘Š",
            "AdBlock5": "â›”ï¸ å»å¹¿å‘Š"
          }

        ad_rule = ["Speedtest","AdBlock1", "AdBlock2", "AdBlock3", "AdBlock4", "AdBlock5"]
        for ad_name in ad_rule:
            if ctx.rule_providers[ad_name].match(metadata):
                ctx.log('[Script] matched %s' % ad_name)
                return ad_action[ad_name]
              
        # Plexç­–ç•¥
        #plex_direct = ["+.plex.direct"]
        #plex_tv = ["+.plex.tv"]
        #for hostname in plex_direct:
            #if hostname in metadata["host"]:
                #ctx.log('[Script] matched %s' % hostname)
                #return "ğŸ˜ å›å®¶"
        #for hostname in plex_tv:
            #if hostname in metadata["host"]:
                #ctx.log('[Script] matched %s' % hostname)
                #return "ğŸŒ å›½é™…äº’è”"
    
        # å®šä¹‰è§„åˆ™é›†ä¸ç­–ç•¥ç»„
        ruleset_action = {
            "Lan": "â­• ç›´è¿",
            "White": "â­• ç›´è¿",
            "Black": "ğŸŒ å›½é™…äº’è”",
            "Telegram": "ğŸ’¬ å³æ—¶é€šè®¯",
            "YouTube": "ğŸ“½ Youtube",
            "Netflix": "ğŸ¬ Netflix",
            "HMTmedia": "ğŸ¥ æ¸¯æ¾³å°åª’ä½“",
            "Disney": "ğŸ¥ å›½é™…åª’ä½“",
            "YoutubeMusic": "ğŸ¥ å›½é™…åª’ä½“",
            "HBO": "ğŸ¥ å›½é™…åª’ä½“",
            "AppleTV": "ğŸ¥ å›½é™…åª’ä½“",
            "GlobalMedia": "ğŸ¥ å›½é™…åª’ä½“", 
            "gameline": "ğŸ® æ¸¸æˆå¹³å°",
            "Digital": "ğŸŒ å›½é™…äº’è”",
            "Paypal": "ğŸ’°æ•°å­—æ”¯ä»˜",
            "Proxy": "ğŸŒ å›½é™…äº’è”",
            "wyy": "ğŸ¥ å›½å†…åª’ä½“",
            "Chinesemedia": "ğŸ¥ å›½å†…åª’ä½“",
            "AppleAPI": "ğŸ“± è‹¹æœæœåŠ¡",               
            "Google": "ğŸ”„ è°·æ­ŒæœåŠ¡",
            "GoogleCDN": "ğŸ”„ è°·æ­ŒæœåŠ¡",
            "Microsoft": "ğŸ–¥ å¾®è½¯æœåŠ¡",
            "AppleCDN": "â­• ç›´è¿",                  
            "MicrosoftCDN": "â­• ç›´è¿",            
            "Domestic": "â­• ç›´è¿"
          }

        # ç­–ç•¥ç»„è§„åˆ™
        ruleset_list = [r for r in ruleset_action]
        for rule_name in ruleset_list:
            if ctx.rule_providers[rule_name].match(metadata):
                ctx.log('[Script] matched %s' % rule_name)
                return ruleset_action[rule_name]

        ip = metadata["dst_ip"] or ctx.resolve_ip(metadata["host"])
        if ip == "":
            return "â­• ç›´è¿"

        code = ctx.geoip(ip)
        if code == "CN":
            return "â­• ç›´è¿"
            ctx.log('[Script] Geoip CN')

        # æ¼ç½‘ä¹‹é±¼
        return "â¬›ï¸ æ¼ç½‘ä¹‹é±¼"
